<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>My Heart’s Day</title>
<link rel="icon" type="image/png" href="icons/heart-with-arrow.png">
<style>
  /* Red velvet color palette */
:root {
  --red-velvet-dark: #7b0a0a;
  --red-velvet: #b22222;
  --red-velvet-light: #e25858;
  --glow-red: #ff4d4d;
}

/* Reset and base */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body, html {
  height: 100%;
  overflow: hidden;
  background: radial-gradient(ellipse at bottom, #0b0c1a 0%, #000010 100%);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: var(--red-velvet-light);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: relative;
  padding: 10px;
  text-align: center;
}

/* Starry background */
#stars, #fireworksCanvas {
  position: fixed;
  top: 0; left: 0;
  width: 100vw;
  height: 100vh;
  background: transparent;
  z-index: 0;
  pointer-events: none;
}

/* Container for text and heart */
.container {
  position: relative;
  z-index: 10;
  text-align: center;
  max-width: 90%;
}

/* Birthday text */
.birthday-text {
  font-size: clamp(1.5rem, 6vw, 3.5rem);
  font-weight: 900;
  color: var(--red-velvet);
  text-shadow:
    0 0 10px var(--glow-red),
    0 0 20px var(--glow-red),
    0 0 30px var(--red-velvet-light),
    0 0 40px var(--red-velvet-light);
  margin-bottom: 0.8rem;
  font-family: 'Brush Script MT', cursive, sans-serif;
  line-height: 1.3;
  word-break: break-word;
  padding: 0 5px;
}

/* Heart container */
.heart-container {
  width: 80%;
  max-width: 350px;
  margin: 0 auto;
  aspect-ratio: 1 / 1;
  animation: pulse 2.5s infinite ease-in-out;
}

/* Heart canvas */
#heartCanvas {
  width: 100%;
  height: 100%;
  display: block;
}

/* Heart pulse animation */
@keyframes pulse {
  0%, 100% {
    transform: scale(1);
    filter: drop-shadow(0 0 6px var(--red-velvet-light));
  }
  50% {
    transform: scale(1.1);
    filter: drop-shadow(0 0 15px var(--glow-red));
  }
}

/* Small screen tweaks */
@media (max-width: 600px) {
  .birthday-text {
    font-size: clamp(1.2rem, 7vw, 2.5rem);
  }
  .heart-container {
    max-width: 250px;
  }
}
</style>
</head>
<body>
<!-- Background Music -->
<audio autoplay loop hidden>
  <source src="music/raabta_instrumental.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>

<!-- Starry background -->
<canvas id="stars"></canvas>

<!-- Fireworks background -->
<canvas id="fireworksCanvas"></canvas>

<div class="container">
  <div class="birthday-text">Happy Birthday To The One Who Owns My Heart ❤︎ </div>
  <div class="birthday-text"> Shahzaib Khan </div>
  <div class="heart-container">
    <canvas id="heartCanvas"></canvas>
  </div>
</div>

<script>
  /* ------------------ STAR BACKGROUND ------------------ */
  const starsCanvas = document.getElementById('stars');
  const starsCtx = starsCanvas.getContext('2d');
  let stars = [];

  function initStars() {
    starsCanvas.width = window.innerWidth;
    starsCanvas.height = window.innerHeight;
    stars = [];
    const starCount = 200;
    for (let i = 0; i < starCount; i++) {
      stars.push({
        x: Math.random() * starsCanvas.width,
        y: Math.random() * starsCanvas.height,
        radius: Math.random() * 1.2,
        alpha: Math.random(),
        delta: 0.005 + Math.random() * 0.015
      });
    }
  }

  function drawStars() {
    starsCtx.clearRect(0, 0, starsCanvas.width, starsCanvas.height);
    stars.forEach(star => {
      star.alpha += star.delta;
      if (star.alpha <= 0) { star.alpha = 0; star.delta = -star.delta; }
      else if (star.alpha >= 1) { star.alpha = 1; star.delta = -star.delta; }
      starsCtx.beginPath();
      starsCtx.arc(star.x, star.y, star.radius, 0, 2 * Math.PI);
      starsCtx.fillStyle = `rgba(255, 255, 255, ${star.alpha})`;
      starsCtx.fill();
    });
  }

  /* ------------------ FIREWORKS ------------------ */
  const fireworksCanvas = document.getElementById('fireworksCanvas');
  const ctx = fireworksCanvas.getContext('2d');
  fireworksCanvas.width = window.innerWidth;
  fireworksCanvas.height = window.innerHeight;

  let fireworks = [];
  let particles = [];

  class Firework {
    constructor(sx, sy, tx, ty) {
      this.x = sx; this.y = sy; this.sx = sx; this.sy = sy;
      this.tx = tx; this.ty = ty;
      this.distanceToTarget = dist(sx, sy, tx, ty);
      this.distanceTraveled = 0;
      this.coordinates = [];
      this.coordinateCount = 3;
      while (this.coordinateCount--) { this.coordinates.push([this.x, this.y]); }
      this.angle = Math.atan2(ty - sy, tx - sx);
      this.speed = 3 + Math.random() * 2;
      this.acceleration = 1.05;
      this.brightness = random(50, 70);
      this.targetRadius = 1;
    }
    update(index) {
      this.coordinates.pop();
      this.coordinates.unshift([this.x, this.y]);
      if (this.targetRadius < 8) this.targetRadius += 0.3; else this.targetRadius = 1;
      this.speed *= this.acceleration;
      let vx = Math.cos(this.angle) * this.speed;
      let vy = Math.sin(this.angle) * this.speed;
      this.distanceTraveled = dist(this.sx, this.sy, this.x + vx, this.y + vy);
      if (this.distanceTraveled >= this.distanceToTarget) {
        createParticles(this.tx, this.ty);
        fireworks.splice(index, 1);
      } else { this.x += vx; this.y += vy; }
    }
    draw() {
      ctx.beginPath();
      ctx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
      ctx.lineTo(this.x, this.y);
      ctx.strokeStyle = `hsl(${random(0, 360)}, 100%, ${this.brightness}%)`;
      ctx.stroke();
      ctx.beginPath();
      ctx.arc(this.tx, this.ty, this.targetRadius, 0, Math.PI * 2);
      ctx.stroke();
    }
  }

  class Particle {
    constructor(x, y) {
      this.x = x; this.y = y;
      this.coordinates = [];
      this.coordinateCount = 5;
      while (this.coordinateCount--) { this.coordinates.push([this.x, this.y]); }
      this.angle = random(0, Math.PI * 2);
      this.speed = random(1, 10);
      this.friction = 0.95;
      this.gravity = 0.7;
      this.hue = random(0, 360);
      this.brightness = random(50, 80);
      this.alpha = 1;
      this.decay = random(0.015, 0.03);
    }
    update(index) {
      this.coordinates.pop();
      this.coordinates.unshift([this.x, this.y]);
      this.speed *= this.friction;
      this.x += Math.cos(this.angle) * this.speed;
      this.y += Math.sin(this.angle) * this.speed + this.gravity;
      this.alpha -= this.decay;
      if (this.alpha <= 0) { particles.splice(index, 1); }
    }
    draw() {
      ctx.beginPath();
      ctx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
      ctx.lineTo(this.x, this.y);
      ctx.strokeStyle = `hsla(${this.hue}, 100%, ${this.brightness}%, ${this.alpha})`;
      ctx.stroke();
    }
  }

  function createParticles(x, y) { let particleCount = 30; while (particleCount--) { particles.push(new Particle(x, y)); } }
  function dist(aX, aY, bX, bY) { return Math.sqrt((bX - aX) ** 2 + (bY - aY) ** 2); }
  function random(min, max) { return Math.random() * (max - min) + min; }

  let lastLaunchTime = 0;
  let launchInterval = 800;

  function loop(timestamp) {
    if (!lastLaunchTime) lastLaunchTime = timestamp;
    const delta = timestamp - lastLaunchTime;
    ctx.globalCompositeOperation = 'destination-out';
    ctx.fillStyle = 'rgba(0, 0, 20, 0.3)';
    ctx.fillRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);
    ctx.globalCompositeOperation = 'lighter';
    if (delta > launchInterval) {
      let startX = fireworksCanvas.width / 2 + (Math.random() * 200 - 100);
      let startY = fireworksCanvas.height;
      let targetX = Math.random() * fireworksCanvas.width;
      let targetY = Math.random() * fireworksCanvas.height / 2;
      fireworks.push(new Firework(startX, startY, targetX, targetY));
      lastLaunchTime = timestamp;
    }
    fireworks.forEach((firework, i) => { firework.update(i); firework.draw(); });
    particles.forEach((particle, i) => { particle.update(i); particle.draw(); });
    drawStars();
    requestAnimationFrame(loop);
  }

  window.addEventListener('resize', () => {
    starsCanvas.width = window.innerWidth;
    starsCanvas.height = window.innerHeight;
    fireworksCanvas.width = window.innerWidth;
    fireworksCanvas.height = window.innerHeight;
    initStars();
  });

  initStars();
  requestAnimationFrame(loop);

/* ------------------ PARTICLE HEART (GLITTER) ------------------ */
const heartCanvas = document.getElementById("heartCanvas");
const hctx = heartCanvas.getContext("2d");
heartCanvas.width = 400;
heartCanvas.height = 350;

// Heart formula (classic parametric heart curve)
function heartFunction(t) {
  let x = 16 * Math.pow(Math.sin(t), 3);
  let y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
  return [x, -y];
}

// Create particles
let heartParticles = [];
let totalParticles = 3000; // much denser than before

for (let i = 0; i < totalParticles; i++) {
  let t = Math.random() * Math.PI * 2;
  let [hx, hy] = heartFunction(t);

  // Spread points inside the heart by scaling randomly
  let scale = (0.7 + Math.random() * 0.6) * 10;
  let x = heartCanvas.width / 2 + hx * scale;
  let y = heartCanvas.height / 2 + hy * scale;

  heartParticles.push({
    x, y,
    r: 0.7 + Math.random() * 1.2, // small glitter dots
    alpha: 0.5 + Math.random() * 0.5,
    twinkle: Math.random() * 0.05 // each particle flickers differently
  });
}

function drawHeart() {
  hctx.clearRect(0, 0, heartCanvas.width, heartCanvas.height);

  heartParticles.forEach(p => {
    // Twinkling glitter effect
    p.alpha += (Math.random() - 0.5) * p.twinkle;
    if (p.alpha < 0.3) p.alpha = 0.3;
    if (p.alpha > 1) p.alpha = 1;

    hctx.beginPath();
    hctx.arc(p.x, p.y, p.r, 0, 2 * Math.PI);

    // Use glowing red color
    hctx.fillStyle = `rgba(255, ${50 + Math.random()*50}, ${50 + Math.random()*50}, ${p.alpha})`;
    hctx.shadowColor = "rgba(255,0,0,0.8)";
    hctx.shadowBlur = 8;
    hctx.fill();
  });
}

function animateHeart() {
  drawHeart();
  requestAnimationFrame(animateHeart);
}
animateHeart();


  /* ------------------ REDIRECT ------------------ */
  function goToSurprise() { window.location.href = "Birthdaysurprise.html"; }
  document.body.addEventListener("click", goToSurprise);
  document.body.addEventListener("touchstart", goToSurprise);
</script>

</body>
</html>
